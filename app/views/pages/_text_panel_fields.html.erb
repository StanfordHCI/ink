<!--Text panel form fields -->
<% if f.object.new_record? %>
  <div id="panel">
<% else %>
  <div id="panel<%=panel.id%>">
  <% end %>
  <span class="input-group-addon">
    <%= f.label :panel_name, "Panel title*" %>
    <% if f.object.new_record? %>
      <%= f.text_field :panel_name %><br/>
    <% else %>
      <%= f.text_field :panel_name, id: panel.id, onblur: "update_panel_menu(this.value, this.id)" %><br/>
    <% end %>
    <%= f.check_box :display %>
    <%= "Display panel name?" %><br/><br/>
    <%= f.label :info, "Panel text" %>
    <%= f.text_area :info %><br/><br/>

    <div>Panel present when user selects...</div>
    <br/>
    <% if !(f.object.new_record?) %>
      <div id="tags<%= panel.id %>">
        <% for option in panel.tags.order(:created_at) %>
          <%= f.fields_for :tags, option, child_index: option.id  do |builder| %>
            <%= render 'tag_fields', f: builder, option_name: option.name %>
          <% end %>
        <% end %>
      </div>
    <% else %> <!-- if the panel is just created -->
      <div id="tags">
        <% for option in @options %>
          <%= add_tags f, :tags, option, @page.id, "TextPanel" %>
        <% end %>
      </div>
    <% end %>
    <br/>
    <%= f.hidden_field :_destroy %>
    <%= link_to "remove", "#", class: "remove_fields" %>
    <% if !(f.object.new_record?) %>
      <div class="preview">
        <%= render template: 'sites/panel', locals: {panel: panel} %>
      </div>
    <% end %>
  </span>
</div>
